---
api_version: v1alpha1
groups:
  - name: CoreOS Install
    spec: coreos-install
    metadata:
      coreos_channel: alpha
      coreos_version: 935.0.0
      ignition_endpoint: http://bootcfg.foo:8080/ignition

  - name: etcd Node 1
    spec: etcd
    require:
      uuid: 16e7d8a7-bfa9-428b-9117-363341bb330b
      os: installed
    metadata:
      networkd_name: ens3
      networkd_gateway: 172.17.0.1
      networkd_dns: 172.17.0.3
      networkd_address: 172.17.0.21/16
      ipv4_address: 172.17.0.21
      etcd_name: node1
      etcd_initial_cluster: "node1=http://172.17.0.21:2380,node2=http://172.17.0.22:2380,node3=http://172.17.0.23:2380"

  - name: etcd Node 2
    spec: etcd
    require:
      uuid: 264cd073-ca62-44b3-98c0-50aad5b5f819
      os: installed
    metadata:
      networkd_name: ens3
      networkd_gateway: 172.17.0.1
      networkd_dns: 172.17.0.3
      networkd_address: 172.17.0.22/16
      ipv4_address: 172.17.0.22
      etcd_name: node2
      etcd_initial_cluster: "node1=http://172.17.0.21:2380,node2=http://172.17.0.22:2380,node3=http://172.17.0.23:2380"

  - name: etcd Node 3
    spec: etcd
    require:
      uuid: 39d2e747-2648-4d68-ae92-bbc70b245055
      os: installed
    metadata:
      networkd_name: ens3
      networkd_gateway: 172.17.0.1
      networkd_dns: 172.17.0.3
      networkd_address: 172.17.0.23/16
      ipv4_address: 172.17.0.23
      etcd_name: node3
      etcd_initial_cluster: "node1=http://172.17.0.21:2380,node2=http://172.17.0.22:2380,node3=http://172.17.0.23:2380"

  - name: etcd Proxy
    spec: etcd_proxy
    require:
      os: installed
    metadata:
      networkd_name: ens3
      networkd_gateway: 172.17.0.1
      networkd_dns: 172.17.0.3
      etcd_initial_cluster: "node1=http://172.17.0.21:2380,node2=http://172.17.0.22:2380,node3=http://172.17.0.23:2380"